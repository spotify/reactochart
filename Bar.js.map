{"version":3,"sources":["src/Bar.js"],"names":["Bar","React","Component","render","xScale","yScale","x","xEnd","y","yEnd","thickness","style","onMouseEnter","onMouseMove","onMouseLeave","showLabel","labelFormat","labelDistance","labelClassName","props","orientation","className","labelClass","rectX","rectY","width","height","xText","yText","textAnchor","textValue","x0","x1","Math","min","abs","max","y0","y1","rect","text","PropTypes","oneOfType","number","string","instanceOf","Date","object","func","bool"],"mappings":"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","sourcesContent":["import invariant from \"invariant\";\nimport isUndefined from \"lodash/isUndefined\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { hasOneOfTwo } from \"./util\";\n\n/**\n * Bar is a low-level component to be used in XYPlot-type charts (namely BarChart).\n * It is specified in terms of a range (min & max) of values on one axis (the bar's long axis)\n * and a single value on the other axis.\n * Passing props `x`, `xEnd` and `y` specifies a horizontal bar,\n * centered on `y` and spanning from `x` to `xEnd`;\n * passing props `x`, `y`, and `yEnd' specifies a vertical bar.\n */\n\nexport default class Bar extends React.Component {\n  static propTypes = {\n    /**\n     * For a vertical bar, `x` represents the X data value on which the bar is centered.\n     * For a horizontal bar, represents the *starting* X value of the bar, ie. the minimum of the range it spans\n     */\n    x: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string,\n      PropTypes.instanceOf(Date)\n    ]),\n    /**\n     * For a horizontal bar, `y` represents the Y data value on which the bar is centered.\n     * For a vertical bar, represents the *starting* Y value of the bar, ie. the minimum of the range it spans\n     */\n    y: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string,\n      PropTypes.instanceOf(Date)\n    ]),\n    /**\n     * For a horizontal bar, `xEnd` represents the *ending* X data value of the bar, ie. the maximum of the range it spans.\n     * Should be undefined if the bar is vertical.\n     */\n    xEnd: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string,\n      PropTypes.instanceOf(Date)\n    ]),\n    /**\n     * For a vertical bar, `yEnd` represents the *ending* Y data value of the bar, ie. the maximum of the range it spans.\n     * Should be undefined if the bar is horizontal.\n     */\n    yEnd: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string,\n      PropTypes.instanceOf(Date)\n    ]),\n\n    /**\n     * The thickness of the bar, in pixels. (width of vertical bar, or height of horizontal bar).\n     */\n    thickness: PropTypes.number,\n    /**\n     * Class name(s) to be included on the bar's <rect> element.\n     */\n    className: PropTypes.string,\n    /**\n     * Inline style object to be included on the bar's <rect> element.\n     */\n    style: PropTypes.object,\n    /**\n     * `mousemove` event handler callback, called when user's mouse moves within the bar.\n     */\n    onMouseMove: PropTypes.func,\n    /**\n     * `mouseenter` event handler callback, called when user's mouse enters the bar.\n     */\n    onMouseEnter: PropTypes.func,\n    /**\n     * `mouseleave` event handler callback, called when user's mouse leaves the bar.\n     */\n    onMouseLeave: PropTypes.func,\n    /**\n     * D3 scale for X axis - provided by XYPlot.\n     */\n    xScale: PropTypes.func,\n    /**\n     * D3 scale for Y axis - provided by XYPlot.\n     */\n    yScale: PropTypes.func,\n    /**\n     * Conditional if column should display values above/beside bar.\n     */\n    showLabel: PropTypes.bool,\n    /**\n     * Format to use for the values or accessor that returns the updated value.\n     */\n    labelFormat: PropTypes.func,\n    /**\n     * The distance from the column the label appears in pixels - default is 24.\n     */\n    labelDistance: PropTypes.number,\n    /**\n     * Class name(s) to be included on the bar's <text> element.\n     */\n    labelClassName: PropTypes.string\n  };\n  static defaultProps = {\n    x: 0,\n    y: 0,\n    thickness: 8,\n    className: \"\",\n    style: {},\n    labelDistance: 24\n  };\n\n  render() {\n    // x/y are values in the *data* domain, not pixel domain\n    const {\n      xScale,\n      yScale,\n      x,\n      xEnd,\n      y,\n      yEnd,\n      thickness,\n      style,\n      onMouseEnter,\n      onMouseMove,\n      onMouseLeave,\n      showLabel,\n      labelFormat,\n      labelDistance,\n      labelClassName\n    } = this.props;\n\n    invariant(\n      hasOneOfTwo(xEnd, yEnd),\n      `Bar expects an xEnd *or* yEnd prop, but not both.`\n    );\n\n    const orientation = isUndefined(xEnd) ? \"vertical\" : \"horizontal\";\n    const className = `rct-chart-bar rct-chart-bar-${orientation} ${this.props\n      .className || \"\"}`;\n    const labelClass = `rct-chart-bar-label ${this.props.labelClassName || \"\"}`;\n\n    let rectX, rectY, width, height, xText, yText, textAnchor, textValue;\n    if (orientation === \"horizontal\") {\n      rectY = yScale(y) - thickness / 2;\n      const x0 = xScale(x);\n      const x1 = xScale(xEnd);\n      rectX = Math.min(x0, x1);\n      width = Math.abs(x1 - x0);\n      height = thickness;\n\n      // horizontal text formatting to right of bar\n      xText = Math.max(x0, x1) + labelDistance;\n      yText = rectY + thickness / 2 + 5;\n      textAnchor = \"\";\n      textValue = xEnd;\n    } else {\n      // vertical\n      rectX = xScale(x) - thickness / 2;\n      const y0 = yScale(y);\n      const y1 = yScale(yEnd);\n      rectY = Math.min(y0, y1);\n      height = Math.abs(y1 - y0);\n      width = thickness;\n\n      // vertical text formatting\n      xText = rectX + thickness / 2;\n      yText = rectY - labelDistance;\n      textAnchor = \"middle\";\n      textValue = yEnd;\n    }\n\n    const rect = (\n      <rect\n        {...{\n          x: rectX,\n          y: rectY,\n          width,\n          height,\n          className,\n          style,\n          onMouseEnter,\n          onMouseMove,\n          onMouseLeave\n        }}\n      />\n    );\n\n    const text = (\n      <text\n        {...{\n          textAnchor,\n          x: xText,\n          y: yText,\n          className: labelClass\n        }}\n      >\n        {labelFormat ? labelFormat(textValue) : textValue}\n      </text>\n    );\n\n    if (showLabel) {\n      return (\n        <g>\n          {rect}\n          {text}\n        </g>\n      );\n    }\n\n    return rect;\n  }\n}\n"],"file":"Bar.js"}